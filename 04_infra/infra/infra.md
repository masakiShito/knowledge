# インフラのナレッジ（超重要・てんこ盛り）

## 心得
- **可用性は最優先**: ダウンは信用損失。SLO/SLIを定義する。
- **冗長化が正義**: 単一障害点（SPOF）を排除する。
- **自動化が基本**: 手作業は事故る。IaCとCI/CDで再現性。
- **小さく壊せる設計**: フェイルセーフとグレースフルデグレード。
- **可観測性が命**: メトリクス/ログ/トレースを統合。
- **セキュリティは最初から**: 後付けは高コスト。
- **コスト意識**: 使わないリソースは削る。
- **変更は可逆に**: ロールバック可能な設計。

---

## 1. 基本概念
- **オンプレ / クラウド / ハイブリッド**
- **IaaS / PaaS / SaaS**
- **リージョン / AZ / エッジ**
- **水平スケール / 垂直スケール**

---

## 2. ネットワーク基礎
### 2.1 IP・サブネット
- IPv4/IPv6
- CIDR（例: 10.0.0.0/24）
- ルーティングテーブル

### 2.2 DNS
- 名前解決 / A, AAAA, CNAME, MX, TXT
- TTLとキャッシュ

### 2.3 TCP/UDP
- TCPは信頼性、UDPは低遅延
- 3-way handshake

### 2.4 HTTP/HTTPS
- TLS/SSLの基本
- HTTP/1.1 / HTTP/2 / HTTP/3

---

## 3. OSと仮想化
- **Linux基礎**: プロセス/ファイル/権限
- **仮想化**: KVM, Xen
- **コンテナ**: Docker, containerd
- **cgroup / namespace**

---

## 4. サーバー構成
### 4.1 Web / App / DB
- 3層構成が基本

### 4.2 Load Balancer
- L4/L7
- ヘルスチェック

### 4.3 Reverse Proxy
- Nginx / HAProxy

---

## 5. ストレージ
- **ブロックストレージ**（高速）
- **オブジェクトストレージ**（S3互換）
- **ファイルストレージ**（NFS）
- **RAID** と冗長化

---

## 6. データベース基礎
- **リレーショナル**: MySQL, PostgreSQL
- **NoSQL**: Redis, MongoDB, DynamoDB
- **レプリケーション / シャーディング**

---

## 7. 可用性と冗長化
- **アクティブ / アクティブ**
- **アクティブ / スタンバイ**
- **フェイルオーバー**
- **SPOF排除**

---

## 8. セキュリティ
- **IAM最小権限**
- **WAF / IDS / IPS**
- **暗号化**: at rest / in transit
- **秘密情報管理**: Vault, KMS
- **ゼロトラスト**

---

## 9. 可観測性
- **メトリクス**: Prometheus, CloudWatch
- **ログ**: ELK, Loki
- **トレース**: OpenTelemetry
- **アラート設計**: ノイズ削減

---

## 10. IaC
- **Terraform**: マルチクラウド
- **CloudFormation**: AWS専用
- **Pulumi**: コードでIaC

---

## 11. CI/CD
- **パイプライン自動化**
- **Blue/Green / Canary**
- **ロールバック戦略**

---

## 12. コンテナオーケストレーション
- **Kubernetes**
- Pod / Service / Ingress
- HPA / Cluster Autoscaler

---

## 13. バックアップ / DR
- **RPO / RTO** 設計
- バックアップは自動化
- DRサイト

---

## 14. パフォーマンス
- キャッシュ（CDN / Redis）
- DBチューニング
- ボトルネック分析

---

## 15. コスト管理
- リソースのタグ付け
- Auto Scaling
- 予約インスタンス/節約プラン

---

## 16. 運用ベストプラクティス
- Runbook / Playbook
- 変更管理
- ポストモーテム（振り返り）

---

## 17. 主要クラウドの特徴
- **AWS**: フル機能で最大手
- **GCP**: データ・AIに強い
- **Azure**: 企業向け連携が強い

---

## 18. もっと深めたいトピック
- SRE / SLO設計
- Service Mesh (Istio)
- マルチリージョン設計
- FinOps

---

## まとめ
インフラは「止まらない・安全・速い」を支える土台。ネットワーク・OS・可用性・セキュリティ・自動化・監視までを一気通貫で押さえると強い。
